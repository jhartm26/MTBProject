import{t as b,e as $,a as Q,V as _,c as C,d as Y,g as J,b as A,h as X,i as Z}from"./VMain.6e411fe2.js";import{_ as E,a as z,b as N,c as I,d as F,V as M}from"./VCard.fe71e90b.js";import{r as q,o as r,h as L,a as e,w as t,f as c,e as w,b as u,t as h,V as m,d as g,aQ as R,j as n,c as o,Y as p,aR as f,aS as ee,k as V,aq as U,F as te,p as ae,g as se}from"./index.84324f05.js";const le={data:()=>({loading:!0,searchStatus:"",searchWeather:"",dialog:!1,dialogDelete:!1,formTitle:"",expand:!1,expandStatusHistory:!1,expandWeatherHistory:!1,changed:!1,states:[],statuses:[],weathers:[],sortByStatus:[],sortByWeather:[],statusHeaders:[{title:"Status",value:"mtbStatus",key:"mtbStatus",sortable:!0},{title:"Created On",value:"createdOn",key:"createdOn",sortable:!0},{title:"Tweet",value:"danger",key:"danger",sortable:!0}],weatherHeaders:[{title:"Temperature",value:"lastReportedTemp",key:"lastReportedTemp",sortable:!0},{title:"Precipitation",value:"precipitation",key:"precipitation",sortable:!0},{title:"Wind",value:"wind",key:"wind",sortable:!0},{title:"Notes",value:"notes",key:"notes",sortable:!0},{title:"Date",value:"createdOn",key:"createdOn",sortable:!0}],sortBy:[],trail:{UUID:"",mtbID:"",name:"",city:"",state:{},centerLatitude:null,centerLongitude:null,status:{},weather:{}},originalTrail:{UUID:"",mtbID:"",name:"",city:"",state:{},centerLatitude:null,centerLongitude:null,status:{},weather:{}},weatherHistory:[],statusHistory:[]}),methods:{async loadTrail(){this.loading=!0;try{const a=await b.getTrail(this.id,!1);this.trail=a,this.originalTrail=Object.assign({},a),this.statuses=await b.getStatusHistory(this.id),this.weathers=await b.getWeatherHistory(this.id),this.states=await b.getStates(),this.loading=!1}catch{this.loading=!1}},deleteItem(){this.formTitle="",this.dialogDelete=!0},async deleteItemConfirm(){await b.deleteTrail(this.trail.UUID||this.trail.uuid),this.closeDelete(),this.$router.push("/")},closeDelete(){this.dialogDelete=!1},async save(){await b.editTrail(this.trail.UUID,this.trail),await this.loadTrail(),this.close()}},created(){this.loadTrail()},watch:{trail:{deep:!0,handler:function(a){console.log(a),console.log(this.originalTrail),this.changed=!1;for(const l of Object.keys(a))if(this.originalTrail[l]!=a[l]){this.changed=!0;break}}}},props:["id"]},k=a=>(ae("data-v-33211cfd"),a=a(),se(),a),ie={class:"headline"},re={class:"d-flex py-3 justify-space-between"},oe={key:0},de={style:{width:"100%"}},ne=k(()=>u("div",{class:"mr-2"},"Dry",-1)),ce={style:{width:"100%"}},ue=k(()=>u("div",{class:"mr-2"},"Mostly Dry",-1)),he={style:{width:"100%"}},me=k(()=>u("div",{class:"mr-2"},"Muddy",-1)),ye={style:{width:"100%"}},pe=k(()=>u("div",{class:"mr-2"},"Some Mud",-1)),fe={style:{width:"100%"}},we=k(()=>u("div",{class:"mr-2"},"Snowy",-1)),ge={style:{width:"100%"}},ke=k(()=>u("div",{class:"mr-2"},"Icy",-1)),be={style:{width:"100%"}},_e=k(()=>u("div",{class:"mr-2"},"Fallen Trees",-1)),Ve={key:0},ve={style:{width:"100%"}},Se={key:0},De={style:{width:"100%"}};function Ce(a,l,G,K,P,v){const T=q("v-data-table");return r(),L(te,null,[e(Q,{modelValue:a.dialogDelete,"onUpdate:modelValue":l[0]||(l[0]=s=>a.dialogDelete=s),"max-width":"500px"},{default:t(()=>[e(z,null,{default:t(()=>[e(N,{class:"text-h5"},{default:t(()=>[c("Are you sure you want to delete this trail?")]),_:1}),e(I,null,{default:t(()=>[e($),e(w,{color:"blue-darken-1",variant:"text",onClick:v.closeDelete},{default:t(()=>[c("Cancel")]),_:1},8,["onClick"]),e(w,{color:"error",variant:"text",onClick:v.deleteItemConfirm},{default:t(()=>[c("OK")]),_:1},8,["onClick"]),e($)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{rounded:"lg",width:"100%"},{default:t(()=>[e(N,null,{default:t(()=>[u("span",ie,"Trail - "+h(this.trail.name),1)]),_:1}),e(m),e(_,{class:"my-3 d-flex align-center",justify:"space-between"},{default:t(()=>[e(C,{class:"ml-2"},{default:t(()=>[e(g,{modelValue:a.trail.mtbID,"onUpdate:modelValue":l[1]||(l[1]=s=>a.trail.mtbID=s),label:"MTB ID"},null,8,["modelValue"]),e(g,{modelValue:a.trail.name,"onUpdate:modelValue":l[2]||(l[2]=s=>a.trail.name=s),label:"Trail Name"},null,8,["modelValue"]),e(g,{modelValue:a.trail.city,"onUpdate:modelValue":l[3]||(l[3]=s=>a.trail.city=s),label:"City"},null,8,["modelValue"]),e(Y,{modelValue:a.trail.state,"onUpdate:modelValue":l[4]||(l[4]=s=>a.trail.state=s),items:a.states,"item-title":"name","item-value":"UUID",label:"State"},null,8,["modelValue","items"]),e(g,{modelValue:a.trail.centerLatitude,"onUpdate:modelValue":l[5]||(l[5]=s=>a.trail.centerLatitude=s),label:"Latitude",type:"number"},null,8,["modelValue"]),e(g,{modelValue:a.trail.centerLongitude,"onUpdate:modelValue":l[6]||(l[6]=s=>a.trail.centerLongitude=s),label:"Longitude",type:"number"},null,8,["modelValue"]),e(_,{justify:"space-around",class:"mt-1"},{default:t(()=>[e(w,{color:"success",dark:"",class:"mb-2 mr-5 ml-2",disabled:!a.changed,onClick:v.save},{default:t(()=>[c(" Save Changes ")]),_:1},8,["disabled","onClick"]),e(w,{color:"error",dark:"",class:"mb-2 mr-5 ml-2",onClick:v.deleteItem},{default:t(()=>[c(" Delete ")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(m,{thickness:2,inset:"",vertical:""}),e(C,{class:"d-flex flex-column align-center justify-space-between fill-height"},{default:t(()=>[e(z,{class:"mx-2 mb-2","max-width":"368"},{default:t(()=>[e(F,{title:"Weather"},R({_:2},[this.trail.weather?{name:"subtitle",fn:t(()=>{var s;return[c(" as of last update on "+h(new Date((s=this.trail.weather)==null?void 0:s.createdOn).toLocaleDateString()),1)]}),key:"1"}:{name:"subtitle",fn:t(()=>[e(n,{icon:"mdi-alert",size:"18",color:"error",class:"me-1 pb-1"}),c(" No Data Found ")]),key:"0"}]),1024),e(M,{class:"py-0"},{default:t(()=>[e(_,{align:"center","no-gutters":""},{default:t(()=>[e(C,{class:"text-h2",cols:"6"},{default:t(()=>{var s,y;return[c(h((s=this.trail.weather)!=null&&s.lastReportedTemp?`${(y=this.trail.weather)==null?void 0:y.lastReportedTemp.toString().split(".")[0]}\xB0F`:"N/A"),1)]}),_:1}),e(C,{cols:"6",class:"text-right"},{default:t(()=>{var s,y,S,D,i,d,H,x,B,W,j,O;return[(y=(s=this.trail.weather)==null?void 0:s.notes)!=null&&y.toLowerCase().includes("part")?(r(),o(n,{key:0,icon:"mdi-weather-partly-cloudy",size:"88"})):(D=(S=this.trail.weather)==null?void 0:S.notes)!=null&&D.toLowerCase().includes("cloud")?(r(),o(n,{key:1,icon:"mdi-weather-cloudy",size:"88"})):(d=(i=this.trail.weather)==null?void 0:i.notes)!=null&&d.toLowerCase().includes("rain")?(r(),o(n,{key:2,icon:"mdi-weather-pouring",size:"88"})):(x=(H=this.trail.weather)==null?void 0:H.notes)!=null&&x.toLowerCase().includes("thunder")?(r(),o(n,{key:3,icon:"mdi-lightning-rainy",size:"88"})):(W=(B=this.trail.weather)==null?void 0:B.notes)!=null&&W.toLowerCase().includes("snow")?(r(),o(n,{key:4,icon:"mdi-weather-snowy-heavy",size:"88"})):(O=(j=this.trail.weather)==null?void 0:j.notes)!=null&&O.toLowerCase().includes("hail")?(r(),o(n,{key:5,icon:"mdi-weather-hail",size:"88"})):(r(),o(n,{key:6,icon:"mdi-weather-sunny",size:"88"}))]}),_:1})]),_:1})]),_:1}),u("div",re,[e(p,{density:"compact","prepend-icon":"mdi-weather-windy"},{default:t(()=>[e(f,null,{default:t(()=>{var s;return[c(h(((s=this.trail.weather)==null?void 0:s.wind)||"?"),1)]}),_:1})]),_:1}),e(p,{density:"compact","prepend-icon":"mdi-weather-pouring"},{default:t(()=>[e(f,null,{default:t(()=>{var s,y;return[c(h(((s=this.trail.weather)==null?void 0:s.precipitation)==="none"?"0%":((y=this.trail.weather)==null?void 0:y.precipitation)||"?"),1)]}),_:1})]),_:1})])]),_:1}),e(z,{class:"ma-2","max-width":"368"},{default:t(()=>{var s,y,S,D;return[e(F,{title:"Status"},R({_:2},[this.trail.status?{name:"subtitle",fn:t(()=>{var i;return[c(" as of last update on "+h(new Date((i=this.trail.status)==null?void 0:i.createdOn).toLocaleDateString()),1)]}),key:"1"}:{name:"subtitle",fn:t(()=>[e(n,{icon:"mdi-alert",size:"18",color:"error",class:"me-1 pb-1"}),c(" No Data Found ")]),key:"0"}]),1024),e(M,{class:ee(["py-0",(s=this.trail.status)!=null&&s.conditions?"":"mb-5"])},{default:t(()=>[e(_,{align:"center","no-gutters":""},{default:t(()=>[e(C,{class:"text-h4"},{default:t(()=>{var i;return[c(h(((i=this.trail.status)==null?void 0:i.mtbStatus)||"No Data"),1)]}),_:1})]),_:1})]),_:1},8,["class"]),(y=this.trail.status)!=null&&y.conditions?(r(),o(U,{key:0},{default:t(()=>[a.expand?(r(),L("div",oe,[u("div",de,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[ne,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.dry)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",ce,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[ue,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.mostlyDry)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",he,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[me,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.muddy)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",ye,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[pe,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.someMud)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",fe,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[we,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.snowy)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",ge,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[ke,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.icy)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})]),u("div",be,[e(p,{density:"compact"},{default:t(()=>[e(f,{class:"d-flex justify-space-between align-center"},{default:t(()=>{var i,d;return[_e,e(m,{class:"border-opacity-75 mr-1",width:"10px"}),((d=(i=this.trail.status)==null?void 0:i.conditions)==null?void 0:d.fallenTrees)===1?(r(),o(n,{key:0,icon:"mdi-check-bold",size:"large",color:"green-darken-2",start:""})):(r(),o(n,{key:1,icon:"mdi-close-thick",size:"large",color:"red-darken-2",start:""}))]}),_:1})]),_:1})])])):V("",!0)]),_:1})):V("",!0),(S=this.trail.status)!=null&&S.conditions?(r(),o(m,{key:1,class:"mt-2"})):V("",!0),(D=this.trail.status)!=null&&D.conditions?(r(),o(I,{key:2,class:"mt-2"},{default:t(()=>[e(w,{onClick:l[7]||(l[7]=i=>a.expand=!a.expand)},{default:t(()=>[c(h(a.expand?"Hide Conditions":"Show Conditions"),1)]),_:1})]),_:1})):V("",!0)]}),_:1})]),_:1})]),_:1}),e(m,{class:"mt-2"}),e(I,{class:"mt-2"},{default:t(()=>[e(w,{onClick:l[8]||(l[8]=s=>a.expandStatusHistory=!a.expandStatusHistory)},{default:t(()=>[c(h(a.expand?"Hide Status Archive":"Show Status Archive"),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[a.expandStatusHistory?(r(),L("div",Ve,[u("div",ve,[e(T,{items:a.statuses,headers:a.statusHeaders,loading:a.loading,search:a.searchStatus,"sort-by":a.sortByStatus,"onUpdate:sortBy":l[10]||(l[10]=s=>a.sortByStatus=s),"item-key":"uuid"},{top:t(()=>[e(_,{class:"d-flex mt-4",style:{"align-items":"center","max-width":"100%"}},{default:t(()=>[e(g,{modelValue:a.searchStatus,"onUpdate:modelValue":l[9]||(l[9]=s=>a.searchStatus=s),label:"Search",class:"mr-4 ml-5"},null,8,["modelValue"])]),_:1})]),"item.createdOn":t(({item:s})=>[c(h(new Date(s.raw.createdOn).toLocaleDateString()),1)]),_:1},8,["items","headers","loading","search","sort-by"])])])):V("",!0)]),_:1}),e(m,{class:"mt-2"}),e(I,{class:"mt-2 mb-2"},{default:t(()=>[e(w,{onClick:l[11]||(l[11]=s=>a.expandWeatherHistory=!a.expandWeatherHistory)},{default:t(()=>[c(h(a.expand?"Hide Weather Archive":"Show Weather Archive"),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[a.expandWeatherHistory?(r(),L("div",Se,[u("div",De,[e(T,{items:a.weathers,headers:a.weatherHeaders,loading:a.loading,search:a.searchWeather,"sort-by":a.sortByWeather,"onUpdate:sortBy":l[13]||(l[13]=s=>a.sortByWeather=s),"item-key":"uuid"},{top:t(()=>[e(_,{class:"d-flex mt-4",style:{"align-items":"center","max-width":"100%"}},{default:t(()=>[e(g,{modelValue:a.searchWeather,"onUpdate:modelValue":l[12]||(l[12]=s=>a.searchWeather=s),label:"Search",class:"mr-4 ml-5"},null,8,["modelValue"])]),_:1})]),"item.createdOn":t(({item:s})=>[c(h(new Date(s.raw.createdOn).toLocaleDateString()),1)]),_:1},8,["items","headers","loading","search","sort-by"])])])):V("",!0)]),_:1})]),_:1})],64)}const Te=E(le,[["render",Ce],["__scopeId","data-v-33211cfd"]]),ze={data:()=>({}),components:{TrailDetails:Te},props:["id"]};function Ie(a,l,G,K,P,v){const T=q("TrailDetails");return r(),o(J,{id:"inspire"},{default:t(()=>[e(X,{flat:""},{default:t(()=>[e(A,{class:"fill-height d-flex align-center wide"},{default:t(()=>[e(w,{variant:"text",onClick:l[0]||(l[0]=s=>this.$router.push("/"))},{default:t(()=>[c(" Go back to home ")]),_:1})]),_:1})]),_:1}),e(Z,{class:"bg-grey-lighten-3"},{default:t(()=>[e(A,null,{default:t(()=>[e(T,{id:this.id},null,8,["id"])]),_:1})]),_:1})]),_:1})}const xe=E(ze,[["render",Ie]]);export{xe as default};
